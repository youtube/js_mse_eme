<!DOCTYPE html>
<!--
Copyright 2017 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html>
  <head>
    <meta charset="utf-8" />
    <title>Media Source and Encrypted Media Conformance Tests</title>
    <link rel="stylesheet" href="main.css" type="text/css">
  </head>
  <body>
    <header>
      <div>
        <h1>Media Source and Encrypted Media Conformance Tests</h1>
      </div>
    </header>
    <div class="content">
      <div class="linkbar">
        <strong><a href="2018.html">2018 Tests</a></strong> .
        <a href="2017.html">2017 Tests</a> ·
        <a href="2016.html">2016 Tests</a> ·
        <a href="2015.html">2015 Tests</a> ·
        <a href="0.6.html">2014 Tests</a> ·
        <a href="0.5.html">2013 Tests</a> ·
        <a href="tip.html">Tip Tests</a> |
        <a href="links.html">Links</a>
      </div>
      <h2>Changelog</h2>
      <h3>2017-07-12</h3>
      <ul>
        <li>2018 and tip now have an EME test to validate the creation of multiple MediaKeySession objects.</li>
      </ul>
      <h3>2017-07-06</h3>
      <ul>
        <li>Added playback performance tests to 2018 and tip. Tests validate decoder performance for all video formats at different playback rates.</li>
	<li>Added playbackRate timing tests to progressive test suite for 2018 and tip.</li>
      </ul>
      <h3>2017-05-31</h3>
      <ul>
	<li>2018 tests have been branched from tip.</li>
      </ul>
      <h3>2017-05-18</h3>
      <ul>
        <li>Layout for test pages no longer uses tables.</li>
      </ul>
      <h3>2017-04-26</h3>
      <ul>
        <li>Updated tip tests to resolve a specification change. MediaSource.duration is now not set below the highest presentation timestamp of any buffered coded frames. Frames are now explicitly removed.</li>
      </ul>
      <h3>2016-12-21</h3>
      <ul>
        <li>Added WebGL performance tests to 2017 and tip.</li>
      </ul>
      <h3>2016-10-31</h3>
      <ul>
        <li>Added EME initData validation tests for 2016, 2017, and tip.</li>
      </ul>
      <h3>2016-09-06</h3>
      <ul>
        <li>2017 tests have been branched from tip.</li>
      </ul>
      <h3>2016-09-03</h3>
      <ul>
        <li>Added MSE Opus tests to tip.</li>
        <li>Added encrypted Opus test to tip.</li>
        <li>EME tests on tip now validate that key status is usable for all keys.</li>
      </ul>
      <h3>2016-08-31</h3>
      <ul>
        <li>Fixed broken progressive tests on tip.</li>
        <li>Tip test AppendH264VideoOutOfOrder is now optional.</li>
      </ul>
      <h3>2016-08-26</h3>
      <ul>
        <li>Fixed EME stream fetching logic for tip. Now we are only fetching 4 segments of each stream for aac, h264, and vp9.</li>
      </ul>
      <h3>2016-08-08</h3>
      <ul>
        <li>Fixed mixed-content license requests issue for 2016 and Tip.</li>
      </ul>
      <h3>2016-08-02</h3>
      <ul>
        <li>Fixed Tip EME bug where the tests were always selecting Widevine key system even when using PlayReady.</li>
      </ul>
      <h3>2016-07-20</h3>
      <ul>
        <li>Reduced the number of audio segments appended to the audio buffer in 2016 and tip EME tests.</li>
        <li>Performance and Endurance tests have been removed for all test versions.</li>
        <li>Tip EME tests have been updated with Widevine and PlayReady tests using EME Spec from 04 February 2016.</li>
      </ul>
      <h3>2016-06-23</h3>
      <ul>
        <li>Added tests for Widevine Aac, Widevine VP9, PlayReady H264, and PlayReady Aac to EME 2016.</li>
      </ul>
      <h3>2016-06-17</h3>
      <ul>
        <li>Added Widevine H264 test to EME 2016.</li>
      </ul>
      <h3>2016-06-13</h3>
      <ul>
        <li>Cleaned up EME Tests for 2016.</li>
        <li>Fixed a webm parser bug that excluded Tracks from the init segment.</li>
        <li>Fixed a bug in the msutil appendAt method that assumed a blocking appendBuffer call.</li>
      </ul>
      <h3>2016-04-28</h3>
      <ul>
        <li>Cleaned up console logging.</li>
      </ul>
      <h3>2016-04-15</h3>
      <ul>
        <li>Updated EventTimestamp test on Tip to be more spec compliant and Chrome compliant.</li>
      </ul>
      <h3>2016-02-24</h3>
      <ul>
        <li>Removed PIFF uuid header from encrypted mp4 files.</li>
      </ul>
      <h3>2016-01-20</h3>
      <ul>
        <li>Clear Key PSSH headers are now added for encrypted MP4 content in cases where the header is missing.</li>
      </ul>
      <h3>2016-01-13</h3>
      <ul>
        <li>Resolved a bug where some tests were failing with VP9 media unexpectedly.</li>
      </ul>
      <h3>2015-12-11</h3>
      <ul>
        <li>Resolved a bug where some tests were not using VP9 media as expected and were instead using H264 media. Tests now use VP9 media as expected.</li>
        <li>Updated DurationAfterAppendAudio and DurationAfterAppendVideo tests on 2015, 2016, and tip. Tests are now more MSE spec compliant and account for timing issues.</li>
      </ul>
      <h3>2015-10-27</h3>
      <ul>
        <li>Update to MediaSource duration test to make it more compatible with webkit based browsers.</li>
        <li>Branched 2016 tests.</li>
        <li>Updated test runner to have more control over the configurations for each test version. Tip will now default to VP9.</li>
      </ul>
      <h3>2015-10-09</h3>
      <ul>
        <li>VideoBufferSize and DASHLatency tests now handle QUOTA_EXCEEDED_ERROR_CODE in 2015 and tip.</li>
        <li>Updated MediaSourceDuration on 2015 and tip to be more MSE specification compliant.</li>
      </ul>
      <h3>2015-10-06</h3>
      <ul>
        <li>Fix for webm parser that caused large segment sizes. Improved logging in webm parser.</li>
        <li>Progressive tests now support VP9.</li>
      </ul>
      <h3>2015-09-10</h3>
      <ul>
        <li>Encrypted media tests now support VP9 on 2015.</li>
      </ul>
      <h3>2015-08-20</h3>
      <ul>
        <li>Fixed PlayReadySupport test on 2015 to check for 'probably' when including the codec type and 'maybe' when excluding the codec type.</li>
        <li>Improvements to 2015 EME tests. Keys and kids are now directly associated with the specific stream definition. Cleaned up EME test code.</li>
      </ul>
      <h3>2015-08-03</h3>
      <ul>
        <li>Fix to MediaSourceDuration test in 2015 and tip to assert that values are within 0.01 of the expected values.</li>
        <li>Improvements to StreamDef to allow tests that to use the format they require. This allows FrameGap and FrameOverlap to be executed in VP9 mode but with still using the H264 assets that it depends on.</li>
      </ul>
      <h3>2015-07-28</h3>
      <ul>
        <li>Fixed a bug that caused a race condition on MediaElementTest on 2015 and tip.</li>
        <li>Clarified test result requirements for PlayReady and WideVine Support tests. It is now documented in 2015 that you must pass one of these tests.</li>
      </ul>
      <h3>2015-07-09</h3>
      <ul>
        <li>Updated WidevineSupport EME test on 2015 and tip to more accurately validate the Widevine support. Now VP9 Widevine support is not tested unless WebM/VP9 is enabled.</li>
        <li>Updated AbortVideo and AbortAudio MSE tests on 2015 and tip to be event driven. This should resolve some timing issues with this test.</li>
      </ul>
      <h3>2015-06-16</h3>
      <ul>
        <li>Updated DelayedAudio and DelayedVideo test cases to account for Chrome allowing 3 seconds of underflow when video starved.</li>
      </ul>
      <h3>2015-06-11</h3>
      <ul>
        <li>Replaced WebM/VP9 Video1MB video with a video encoded with VP9 instead of VP8.</li>
        <li>Removed WebM vorbis audio files. Replaced the files with aac mp4 files.</li>
      </ul>
      <h3>2015-06-03</h3>
      <ul>
        <li>Updated test-video-1MB.mp4 (Video1MB) to have a start time that starts at 0.0.</li>
      </ul>
      <h3>2015-05-15</h3>
      <ul>
        <li>Updated EME tests on 2015 to use explicitly EME 0.1b.</li>
        <li>Removed key system redefining in encryptedMediaPortability.</li>
      </ul>
      <h3>2015-05-12</h3>
      <ul>
        <li>Updated tests label to contain versions of the MSE and EME specs that are being targeted by the tests.</li>
      </ul>
      <h3>2015-03-31</h3>
      <ul>
        <li>Branched EME tests from MSE conformance test suite into its own test suite for 2015 and tip.</li>
        <li>Added more control for the display and linking between test suites (performance, endurance, etc).</li>
      </ul>
      <h3>2015-03-26</h3>
      <ul>
        <li>Update to performance tests on 2015 and tip to the latest MSE.</li>
        <li>Update to endurance tests on 2015 and tip to the latest MSE.</li>
      </ul>
      <h3>2015-02-13</h3>
      <ul>
        <li>Fixed bad conditional check for dual implementations of MSE webkit prefixes on tip and 2015.</li>
        <li>Removed optional parameter from EME tests that have been moved into mandatory on tip.</li>
        <li>Added MSE version to the page heading.</li>
      </ul>
      <h3>2015-02-04</h3>
      <ul>
        <li>Upgraded tip EME tests to latest draft specification.</li>
      </ul>
      <h3>2014-12-10</h3>
      <ul>
        <li>Branched 2015 tests from tip. Tip will continue to be updated to the latest version of MSE and EME.</li>
        <li>File reorganization to make branching new versions easier.</li>
      </ul>
      <h3>2014-12-04</h3>
      <ul>
        <li>Fixed session issue related to mediakey detection for EME tests on tip.</li>
        <li>Fixed race condition in PlaybackState test on tip.</li>
      </ul>
      <h3>2014-11-25</h3>
      <ul>
        <li>WidevineSupport test on tip now validates for VP9.</li>
      </ul>
      <h3>2014-11-17</h3>
      <ul>
        <li>Fixed issue with mediakey detection in EME tests on tip.</li>
        <li>Updated instructions page.</li>
      </ul>
      <h3>2014-11-12</h3>
      <ul>
        <li>It is now easier to select 'webm/vp9'. Replaced dropdown selector with on/off switch. You can also enable webm/vp9 testing by appending '&amp;enablewebm=true' to the url.</li>
        <li>WebMHandling test removed from tip. To validate VP9 playback with MSE run the tests with 'webm/vp9' set to 'on'.</li>
      </ul>
      <h3>2014-11-07</h3>
      <ul>
        <li>Fixed format issue in DASHLatency test on tip. Reduced size of video content that is added to the source buffer.</li>
        <li>Fixed format issues in some tests as a result of VP9 migration. Specifically fixes failures in 'Seek' test on tip.</li>
        <li>Log output is now in reverse order.</li>
        <li>Branched performance tests into 0.5, 0.6, and Tip. Updated tip tests to use 'appendBuffer' instead of 'append'.</li>
      </ul>
      <h3>2014-10-08</h3>
      <ul>
        <li>Tests are now checking for updating source buffers. This fixes issues with tests #42 and #48.</li>
      </ul>
      <h3>2014-09-04</h3>
      <ul>
        <li>Fixed timeout issues that resulted from downloading large video files on slow connections (specifically with test #20).</li>
      </ul>
      <h3>2014-04-11</h3>
      <ul>
        <li>Added initial webm/VP9/vorbis support into <b>tip</b> <i>only</i>, so ignore the switch in the 2013/2014 tests. Not all tests are working (the mp4-specific tests and some of the clearkey tests get a pass). Use the dropdown for webm. Nothing should be changed for legacy or 2014 tests.</li>
        <li>Note that vp9 testing isn't ready for the other tests (Performance, Progressive, Endurance).</li>
        <li>Abstracted out streams so that the tests can be toggled between mp4 and webm.</li>
        <li>Fixed issue with DASHLatency test not being, well, testing latency.</li>
        <li>Moved DASHLatency test below TimestampOffset* tests, as it will most likely fail if TimestampOffsetVideo test fails.</li>
        <li>Known bugs:
          <ul>
            <li>Existing bug with unprefixed API usage in tip + endurance/performance/progressive tests.</li>
          </ul>
        </li>
        <li>TODO:
          <ul>
            <li>Add URL options to start the tests in mp4 or webm mode directly.</li>
            <li>Fix tests to be more MVC.</li>
            <li>Branch 2015 tests.</li>
          </ul>
        </li>
      </ul>
      <h3>2014-01-27</h3>
      <ul>
        <li>Remove revokeObjectURL leak fix for 0.5.</li>
      </ul>
      <h3>2014-01-16</h3>
      <ul>
        <li>Fixed a leak issue involving create/revokeObjectURL.</li>
      </ul>
      <h3>2013-12-11</h3>
      <ul>
        <li>Consolidated and documented EME portability files.</li>
        <li>Unified MSE backend between 0.6 and tip.</li>
        <li>Fixed an issue with shutdown code.</li>
        <li>General style cleanups.</li>
      </ul>
      <h3>2013-11-14</h3>
      <ul>
        <li>Missed a teardown override removal for 0.6.</li>
      </ul>
      <h3>2013-11-13</h3>
      <ul>
        <li>Changed SourceBufferGC to DASHLatency.</li>
        <li>Added watchdog behavior for timeouts. Now test timeout logic will check if there are outstanding XHR requests. If so, it will delay timeout by 15 seconds, and try the same logic again. Hopefully this will help clients with low bandwidth connections.</li>
        <li>Added webkit wrappers for source(open|close|ended) events in 0.6.</li>
        <li>Removed teardown overrides for various tests in 0.6 and tip. This will cause some browsers to fail (e.g. Chrome, but fixed in a later release).</li>
        <li>Renamed tot.html to tip.html, to be more consistent with naming schemes.</li>
        <li>Cosmetic changes for landing page.</li>
      </ul>
      <h3>2013-11-06</h3>
      <ul>
        <li>Updated test 28 (VideoBufferSize) in 0.6/tot to be more relaxed in terms of its requirements.</li>
        <li>Added new test to test of SourceBuffer GC in Tip.</li>
        <li>Reorganized 0.6/tot tests into categories. Test numbers have shuffled and names shortened. It shouldn't be too difficult to match up.</li>
        <li>Reformated test view to be more compact. Color codes:</li>
        <ul>
          <li>Red: Fail</li>
          <li>Green: Pass</li>
          <li>Hollow Red: Optional test that failed</li>
          <li>Yellow: Running test</li>
        </ul>
        <li>Tuning cursor selection with the arrow keys.</li>
        <li>Internal code refactoring.</li>
        <li>Grouping all MSE/EME/Optional tests for better organization.</li>
        <li>Relaxed VideoBufferSize's test requirements to allow for GC at the beginning.</li>
      </ul>
      <h3>2013-10-30</h3>
      <ul>
        <li>General site cleanup (no test changes).</li>
        <li>Fixed broken links.</li>
        <li>Consolidated changes page into main page (and removed old main page).</li>
      </ul>
      <h3>2013-10-25</h3>
      <ul>
        <li>Fixed the links page.</li>
      </ul>
      <h3>2013-10-23</h3>
      <ul>
        <li>Added test to determine if the CDM supports dual video keys. This is meant for LQ/HQ protected playback streams. This has been marked optional for 0.5 and 0.6.</li>
      </ul>
      <h3>2013-10-15</h3>
      <ul>
        <li>Changed ClearKeyCancelKeyRequestPostAdd to listen to keyadded event.</li>
        <li>Changed ClearKeyCancelKeyRequestPostAdd to skip the InvalidStateError test if the CDM doesn't support session IDs.</li>
        <li>Added playback test to CanPlayClearKey, to make sure the browser can actually play ClearKey content.</li>
        <li>Added focus manager to links.html.</li>
        <li>Added ClearKey cancel key tests.</li>
        <li>Fixed some links in the links page.</li>
        <li>Fixed many bugs with tests and infrastructure.</li>
      </ul>
      <h3>2013-9-30</h3>
      <ul>
        <li>Fixed broken tot.html tests.</li>
        <li>Fixed 0.6 tests.</li>
        <li>Added generateKeyRequest and addKey tests.</li>
      </ul>
      <h3>2013-9-16</h3>
      <ul>
        <li>Segregated tests into 0.5 (legacy) and 0.6 (late 2013 and beyond).
        </li>
        <li>Stripped 0.5 polyfill from 0.6.
        </li>
      </ul>
      <h3>2013-3-10</h3>
      <ul>
        <li>Add new command "exclude" to exclude particular tests.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
      </ul>
      <h3>2013-3-6</h3>
      <ul>
        <li>Explicitly set the duration of the stream in seek related tests to
        ensure that their seek position is valid.</li>
      </ul>
      <h3>2013-1-9</h3>
      <ul>
        <li>Put the tests used to check resource leaks into <span class='code'><a
            href="0.5.html?test_type=endurance-test">
            Endurance Tests</a></span>.
        </li>
      </ul>
      <h3>2013-1-3</h3>
      <ul>
        <li>Add a set of <span class='code'><a
            href="0.5.html?test_type=performance-test">
            Performance Tests</a></span> to measure the performance of
        individual implementation.
        </li>
      </ul>
      <h3>2012-12-12</h3>
      <ul>
        <li>Add TestXHROpenState test to ensure that we can set responseType
        before open the request.
        </li>
        <li>Add a switch to enable stop on error during test. Add parameter
        "stoponfailure" to enable it via url.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
        <li>Add new command "loop" to turn on loop.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
        <li>Add new command "run" to run the tests.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        The commands 'runselected' and 'runselectedloop' are deprecated.
        </li>
      </ul>
      <h3>2012-12-06</h3>
      <ul>
        <li>Make test for media.paused into a separate test instead of putting it
        inside SourceChain test.
        </li>
        <li>Add parameter "tests" to select only the tests listed.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
        <li>Simplify the ReadyState test to only check dimension and rename it to
        VideoDimension.
        </li>
      </ul>
      <h3>2012-12-04</h3>
      <ul>
        <li>Add parameter "timeout" to override the default timeout.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
        <li>Add parameter "disable_log" to disable log output.
        See <span class='code'><a href="instructions.html">instructions</a></span>
        for more information.
        </li>
        <li>Add test CannotPlayWidevine to ensure that no one incorrectly
        reports to be able to playback media protected by widevine.
        </li>
        <li>Add WebMHandling test to test if the implementation report its WebM
        support correctly.
        </li>
      </ul>
    </div>
  </body>
</html>
